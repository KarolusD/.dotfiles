var Kr=Object.create;var Et=Object.defineProperty,$r=Object.defineProperties,Vr=Object.getOwnPropertyDescriptor,Jr=Object.getOwnPropertyDescriptors,Yr=Object.getOwnPropertyNames,Mn=Object.getOwnPropertySymbols,Xr=Object.getPrototypeOf,On=Object.prototype.hasOwnProperty,Zr=Object.prototype.propertyIsEnumerable;var Tn=(l,f,p)=>f in l?Et(l,f,{enumerable:!0,configurable:!0,writable:!0,value:p}):l[f]=p,bt=(l,f)=>{for(var p in f||(f={}))On.call(f,p)&&Tn(l,p,f[p]);if(Mn)for(var p of Mn(f))Zr.call(f,p)&&Tn(l,p,f[p]);return l},wt=(l,f)=>$r(l,Jr(f)),Pn=l=>Et(l,"__esModule",{value:!0});var ti=(l,f)=>()=>(f||l((f={exports:{}}).exports,f),f.exports),ei=(l,f)=>{for(var p in f)Et(l,p,{get:f[p],enumerable:!0})},Hn=(l,f,p,d)=>{if(f&&typeof f=="object"||typeof f=="function")for(let w of Yr(f))!On.call(l,w)&&(p||w!=="default")&&Et(l,w,{get:()=>f[w],enumerable:!(d=Vr(f,w))||d.enumerable});return l},Un=(l,f)=>Hn(Pn(Et(l!=null?Kr(Xr(l)):{},"default",!f&&l&&l.__esModule?{get:()=>l.default,enumerable:!0}:{value:l,enumerable:!0})),l),ni=(l=>(f,p)=>l&&l.get(f)||(p=Hn(Pn({}),f,1),l&&l.set(f,p),p))(typeof WeakMap!="undefined"?new WeakMap:0);var $n=ti((oe,ft)=>{var re=void 0,ie=function(l){return re||(re=new Promise(function(f,p){var d=typeof l<"u"?l:{},w=d.onAbort;d.onAbort=function(t){p(new Error(t)),w&&w(t)},d.postRun=d.postRun||[],d.postRun.push(function(){f(d)}),ft=void 0;var i;i||(i=typeof d<"u"?d:{}),i.onRuntimeInitialized=function(){function t(a,c){this.La=a,this.db=c,this.Ja=1,this.eb=[]}function e(a,c){if(this.db=c,c=pt(a)+1,this.Ya=Qt(c),this.Ya===null)throw Error("Unable to allocate memory for the SQL string");rt(a,G,this.Ya,c),this.cb=this.Ya,this.Ua=this.ib=null}function n(a){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),a!=null){var c=this.filename,y="/",b=c;if(y&&(y=typeof y=="string"?y:qt(y),b=c?K(y+"/"+c):y),c=vn(!0,!0),b=Ut(b,(c!==void 0?c:438)&4095|32768,0),a){if(typeof a=="string"){y=Array(a.length);for(var I=0,C=a.length;I<C;++I)y[I]=a.charCodeAt(I);a=y}jt(b,c|146),y=at(b,577),wn(y,a,0,a.length,0,void 0),Ie(y),jt(b,c)}}this.handleError(s(this.filename,r)),this.db=Q(r,"i32"),Wr(this.db),this.Za={},this.Ra={}}var r=$(4),o=i.cwrap,s=o("sqlite3_open","number",["string","number"]),m=o("sqlite3_close_v2","number",["number"]),_=o("sqlite3_exec","number",["number","string","number","number","number"]),v=o("sqlite3_changes","number",["number"]),k=o("sqlite3_prepare_v2","number",["number","string","number","number","number"]),L=o("sqlite3_sql","string",["number"]),V=o("sqlite3_normalized_sql","string",["number"]),Re=o("sqlite3_prepare_v2","number",["number","number","number","number","number"]),gr=o("sqlite3_bind_text","number",["number","number","number","number","number"]),En=o("sqlite3_bind_blob","number",["number","number","number","number","number"]),_r=o("sqlite3_bind_double","number",["number","number","number"]),vr=o("sqlite3_bind_int","number",["number","number","number"]),kr=o("sqlite3_bind_parameter_index","number",["number","string"]),qr=o("sqlite3_step","number",["number"]),Dr=o("sqlite3_errmsg","string",["number"]),xr=o("sqlite3_column_count","number",["number"]),Ir=o("sqlite3_data_count","number",["number"]),Sr=o("sqlite3_column_double","number",["number","number"]),An=o("sqlite3_column_text","string",["number","number"]),Er=o("sqlite3_column_blob","number",["number","number"]),Ar=o("sqlite3_column_bytes","number",["number","number"]),Lr=o("sqlite3_column_type","number",["number","number"]),Br=o("sqlite3_column_name","string",["number","number"]),Rr=o("sqlite3_reset","number",["number"]),Mr=o("sqlite3_clear_bindings","number",["number"]),Tr=o("sqlite3_finalize","number",["number"]),Or=o("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Pr=o("sqlite3_value_type","number",["number"]),Hr=o("sqlite3_value_bytes","number",["number"]),Ur=o("sqlite3_value_text","string",["number"]),Gr=o("sqlite3_value_blob","number",["number"]),jr=o("sqlite3_value_double","number",["number"]),Cr=o("sqlite3_result_double","",["number","number"]),Ln=o("sqlite3_result_null","",["number"]),Fr=o("sqlite3_result_text","",["number","string","number","number"]),Nr=o("sqlite3_result_blob","",["number","number","number","number"]),zr=o("sqlite3_result_int","",["number","number"]),Bn=o("sqlite3_result_error","",["number","string","number"]),Wr=o("RegisterExtensionFunctions","number",["number"]);t.prototype.bind=function(a){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(a)?this.xb(a):a!=null&&typeof a=="object"?this.yb(a):!0},t.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var a=qr(this.La);switch(a){case 100:return!0;case 101:return!1;default:throw this.db.handleError(a)}},t.prototype.sb=function(a){return a==null&&(a=this.Ja,this.Ja+=1),Sr(this.La,a)},t.prototype.Cb=function(a){if(a==null&&(a=this.Ja,this.Ja+=1),a=An(this.La,a),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(a)},t.prototype.Db=function(a){return a==null&&(a=this.Ja,this.Ja+=1),An(this.La,a)},t.prototype.getBlob=function(a){a==null&&(a=this.Ja,this.Ja+=1);var c=Ar(this.La,a);a=Er(this.La,a);for(var y=new Uint8Array(c),b=0;b<c;b+=1)y[b]=E[a+b];return y},t.prototype.get=function(a,c){c=c||{},a!=null&&this.bind(a)&&this.step(),a=[];for(var y=Ir(this.La),b=0;b<y;b+=1)switch(Lr(this.La,b)){case 1:var I=c.useBigInt?this.Cb(b):this.sb(b);a.push(I);break;case 2:a.push(this.sb(b));break;case 3:a.push(this.Db(b));break;case 4:a.push(this.getBlob(b));break;default:a.push(null)}return a},t.prototype.getColumnNames=function(){for(var a=[],c=xr(this.La),y=0;y<c;y+=1)a.push(Br(this.La,y));return a},t.prototype.getAsObject=function(a,c){a=this.get(a,c),c=this.getColumnNames();for(var y={},b=0;b<c.length;b+=1)y[c[b]]=a[b];return y},t.prototype.getSQL=function(){return L(this.La)},t.prototype.getNormalizedSQL=function(){return V(this.La)},t.prototype.run=function(a){return a!=null&&this.bind(a),this.step(),this.reset()},t.prototype.nb=function(a,c){c==null&&(c=this.Ja,this.Ja+=1),a=xn(a);var y=he(a);this.eb.push(y),this.db.handleError(gr(this.La,c,y,a.length-1,0))},t.prototype.wb=function(a,c){c==null&&(c=this.Ja,this.Ja+=1);var y=he(a);this.eb.push(y),this.db.handleError(En(this.La,c,y,a.length,0))},t.prototype.mb=function(a,c){c==null&&(c=this.Ja,this.Ja+=1),this.db.handleError((a===(a|0)?vr:_r)(this.La,c,a))},t.prototype.zb=function(a){a==null&&(a=this.Ja,this.Ja+=1),En(this.La,a,0,0,0)},t.prototype.ob=function(a,c){switch(c==null&&(c=this.Ja,this.Ja+=1),typeof a){case"string":this.nb(a,c);return;case"number":this.mb(a,c);return;case"bigint":this.nb(a.toString(),c);return;case"boolean":this.mb(a+0,c);return;case"object":if(a===null){this.zb(c);return}if(a.length!=null){this.wb(a,c);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+a+")."},t.prototype.yb=function(a){var c=this;return Object.keys(a).forEach(function(y){var b=kr(c.La,y);b!==0&&c.ob(a[y],b)}),!0},t.prototype.xb=function(a){for(var c=0;c<a.length;c+=1)this.ob(a[c],c+1);return!0},t.prototype.reset=function(){return this.freemem(),Mr(this.La)===0&&Rr(this.La)===0},t.prototype.freemem=function(){for(var a;(a=this.eb.pop())!==void 0;)Kt(a)},t.prototype.free=function(){this.freemem();var a=Tr(this.La)===0;return delete this.db.Za[this.La],this.La=0,a},e.prototype.next=function(){if(this.Ya===null)return{done:!0};if(this.Ua!==null&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var a=It(),c=$(4);vt(r),vt(c);try{this.db.handleError(Re(this.db.db,this.cb,-1,r,c)),this.cb=Q(c,"i32");var y=Q(r,"i32");return y===0?(this.gb(),{done:!0}):(this.Ua=new t(y,this.db),this.db.Za[y]=this.Ua,{value:this.Ua,done:!1})}catch(b){throw this.ib=A(this.cb),this.gb(),b}finally{St(a)}},e.prototype.gb=function(){Kt(this.Ya),this.Ya=null},e.prototype.getRemainingSQL=function(){return this.ib!==null?this.ib:A(this.cb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(e.prototype[Symbol.iterator]=function(){return this}),n.prototype.run=function(a,c){if(!this.db)throw"Database closed";if(c){a=this.prepare(a,c);try{a.step()}finally{a.free()}}else this.handleError(_(this.db,a,0,0,r));return this},n.prototype.exec=function(a,c,y){if(!this.db)throw"Database closed";var b=It(),I=null;try{var C=pt(a)+1,P=$(C);rt(a,E,P,C);var yt=P,ut=$(4);for(a=[];Q(yt,"i8")!==0;){vt(r),vt(ut),this.handleError(Re(this.db,yt,-1,r,ut));var T=Q(r,"i32");if(yt=Q(ut,"i32"),T!==0){for(C=null,I=new t(T,this),c!=null&&I.bind(c);I.step();)C===null&&(C={columns:I.getColumnNames(),values:[]},a.push(C)),C.values.push(I.get(null,y));I.free()}}return a}catch(F){throw I&&I.free(),F}finally{St(b)}},n.prototype.each=function(a,c,y,b,I){typeof c=="function"&&(b=y,y=c,c=void 0),a=this.prepare(a,c);try{for(;a.step();)y(a.getAsObject(null,I))}finally{a.free()}if(typeof b=="function")return b()},n.prototype.prepare=function(a,c){if(vt(r),this.handleError(k(this.db,a,-1,r,0)),a=Q(r,"i32"),a===0)throw"Nothing to prepare";var y=new t(a,this);return c!=null&&y.bind(c),this.Za[a]=y},n.prototype.iterateStatements=function(a){return new e(a,this)},n.prototype.export=function(){Object.values(this.Za).forEach(function(c){c.free()}),Object.values(this.Ra).forEach(pe),this.Ra={},this.handleError(m(this.db));var a=yr(this.filename);return this.handleError(s(this.filename,r)),this.db=Q(r,"i32"),a},n.prototype.close=function(){this.db!==null&&(Object.values(this.Za).forEach(function(a){a.free()}),Object.values(this.Ra).forEach(pe),this.Ra={},this.handleError(m(this.db)),pn("/"+this.filename),this.db=null)},n.prototype.handleError=function(a){if(a===0)return null;throw a=Dr(this.db),Error(a)},n.prototype.getRowsModified=function(){return v(this.db)},n.prototype.create_function=function(a,c){Object.prototype.hasOwnProperty.call(this.Ra,a)&&(pe(this.Ra[a]),delete this.Ra[a]);var y=tr(function(b,I,C){for(var P,yt=[],ut=0;ut<I;ut+=1){var T=Q(C+4*ut,"i32"),F=Pr(T);if(F===1||F===2)T=jr(T);else if(F===3)T=Ur(T);else if(F===4){F=T,T=Hr(F),F=Gr(F);for(var Rn=new Uint8Array(T),Vt=0;Vt<T;Vt+=1)Rn[Vt]=E[F+Vt];T=Rn}else T=null;yt.push(T)}try{P=c.apply(null,yt)}catch(Qr){Bn(b,Qr,-1);return}switch(typeof P){case"boolean":zr(b,P?1:0);break;case"number":Cr(b,P);break;case"string":Fr(b,P,-1,-1);break;case"object":P===null?Ln(b):P.length!=null?(I=he(P),Nr(b,I,P.length,-1),Kt(I)):Bn(b,"Wrong API use : tried to return a value of an unknown type ("+P+").",-1);break;default:Ln(b)}});return this.Ra[a]=y,this.handleError(Or(this.db,a,c.length,1,0,y,0,0,0)),this},i.Database=n};var q=Object.assign({},i),S="./this.program",W=typeof window=="object",M=typeof importScripts=="function",B=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",R="",le,Lt,Bt,Rt,Mt,fe;B?(R=M?require("path").dirname(R)+"/":__dirname+"/",fe=()=>{Mt||(Rt=require("fs"),Mt=require("path"))},le=function(t,e){return fe(),t=Mt.normalize(t),Rt.readFileSync(t,e?void 0:"utf8")},Bt=t=>(t=le(t,!0),t.buffer||(t=new Uint8Array(t)),t),Lt=(t,e,n)=>{fe(),t=Mt.normalize(t),Rt.readFile(t,function(r,o){r?n(r):e(o.buffer)})},1<process.argv.length&&(S=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),typeof ft<"u"&&(ft.exports=i),i.inspect=function(){return"[Emscripten Module object]"}):(W||M)&&(M?R=self.location.href:typeof document<"u"&&document.currentScript&&(R=document.currentScript.src),R=R.indexOf("blob:")!==0?R.substr(0,R.replace(/[?#].*/,"").lastIndexOf("/")+1):"",le=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},M&&(Bt=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),Lt=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{r.status==200||r.status==0&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var Ne=i.print||console.log.bind(console),et=i.printErr||console.warn.bind(console);Object.assign(i,q),q=null,i.thisProgram&&(S=i.thisProgram);var ce=[],nt;function tr(t){if(!nt){nt=new WeakMap;for(var e=it.length,n=0;n<0+e;n++){var r=Ot(n);r&&nt.set(r,n)}}if(nt.has(t))return nt.get(t);if(ce.length)e=ce.pop();else{try{it.grow(1)}catch(s){throw s instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":s}e=it.length-1}try{n=e,it.set(n,t),mt[n]=t}catch(s){if(!(s instanceof TypeError))throw s;if(typeof WebAssembly.Function=="function"){r={i:"i32",j:"i64",f:"f32",d:"f64"};var o={parameters:[],results:[]};for(n=1;4>n;++n)o.parameters.push(r["viii"[n]]);r=new WebAssembly.Function(o,t)}else{for(r=[1,0,1,96],o={i:127,j:126,f:125,d:124},r.push(3),n=0;3>n;++n)r.push(o["iii"[n]]);r.push(0),r[1]=r.length-2,n=new Uint8Array([0,97,115,109,1,0,0,0].concat(r,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0])),n=new WebAssembly.Module(n),r=new WebAssembly.Instance(n,{e:{f:t}}).exports.f}n=e,it.set(n,r),mt[n]=r}return nt.set(t,e),e}function pe(t){nt.delete(Ot(t)),ce.push(t)}var _t;i.wasmBinary&&(_t=i.wasmBinary);var yi=i.noExitRuntime||!0;typeof WebAssembly!="object"&&X("no native wasm support detected");function vt(t){var e="i32";switch(e.charAt(e.length-1)==="*"&&(e="i32"),e){case"i1":E[t>>0]=0;break;case"i8":E[t>>0]=0;break;case"i16":Tt[t>>1]=0;break;case"i32":h[t>>2]=0;break;case"i64":U=[0,(x=0,1<=+Math.abs(x)?0<x?(Math.min(+Math.floor(x/4294967296),4294967295)|0)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)],h[t>>2]=U[0],h[t+4>>2]=U[1];break;case"float":ye[t>>2]=0;break;case"double":be[t>>3]=0;break;default:X("invalid type for setValue: "+e)}}function Q(t,e="i8"){switch(e.charAt(e.length-1)==="*"&&(e="i32"),e){case"i1":return E[t>>0];case"i8":return E[t>>0];case"i16":return Tt[t>>1];case"i32":return h[t>>2];case"i64":return h[t>>2];case"float":return ye[t>>2];case"double":return Number(be[t>>3]);default:X("invalid type for getValue: "+e)}return null}var me,ze=!1;function er(t,e,n,r){var o={string:function(k){var L=0;if(k!=null&&k!==0){var V=(k.length<<2)+1;L=$(V),rt(k,G,L,V)}return L},array:function(k){var L=$(k.length);return E.set(k,L),L}};t=i["_"+t];var s=[],m=0;if(r)for(var _=0;_<r.length;_++){var v=o[n[_]];v?(m===0&&(m=It()),s[_]=v(r[_])):s[_]=r[_]}return n=t.apply(null,s),n=function(k){return m!==0&&St(m),e==="string"?A(k):e==="boolean"?!!k:k}(n)}var nr=0,rr=1;function he(t){var e=nr==rr?$(t.length):Qt(t.length);return t.subarray||t.slice||(t=new Uint8Array(t)),G.set(t,e),e}var We=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ct(t,e,n){var r=e+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&We)return We.decode(t.subarray(e,n));for(r="";e<n;){var o=t[e++];if(o&128){var s=t[e++]&63;if((o&224)==192)r+=String.fromCharCode((o&31)<<6|s);else{var m=t[e++]&63;o=(o&240)==224?(o&15)<<12|s<<6|m:(o&7)<<18|s<<12|m<<6|t[e++]&63,65536>o?r+=String.fromCharCode(o):(o-=65536,r+=String.fromCharCode(55296|o>>10,56320|o&1023))}}else r+=String.fromCharCode(o)}return r}function A(t,e){return t?ct(G,t,e):""}function rt(t,e,n,r){if(!(0<r))return 0;var o=n;r=n+r-1;for(var s=0;s<t.length;++s){var m=t.charCodeAt(s);if(55296<=m&&57343>=m){var _=t.charCodeAt(++s);m=65536+((m&1023)<<10)|_&1023}if(127>=m){if(n>=r)break;e[n++]=m}else{if(2047>=m){if(n+1>=r)break;e[n++]=192|m>>6}else{if(65535>=m){if(n+2>=r)break;e[n++]=224|m>>12}else{if(n+3>=r)break;e[n++]=240|m>>18,e[n++]=128|m>>12&63}e[n++]=128|m>>6&63}e[n++]=128|m&63}}return e[n]=0,n-o}function pt(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);55296<=r&&57343>=r&&(r=65536+((r&1023)<<10)|t.charCodeAt(++n)&1023),127>=r?++e:e=2047>=r?e+2:65535>=r?e+3:e+4}return e}function Qe(t){var e=pt(t)+1,n=Qt(e);return n&&rt(t,E,n,e),n}var de,E,G,Tt,h,ye,be;function Ke(){var t=me.buffer;de=t,i.HEAP8=E=new Int8Array(t),i.HEAP16=Tt=new Int16Array(t),i.HEAP32=h=new Int32Array(t),i.HEAPU8=G=new Uint8Array(t),i.HEAPU16=new Uint16Array(t),i.HEAPU32=new Uint32Array(t),i.HEAPF32=ye=new Float32Array(t),i.HEAPF64=be=new Float64Array(t)}var it,$e=[],Ve=[],Je=[];function ir(){var t=i.preRun.shift();$e.unshift(t)}var ot=0,we=null,kt=null;i.preloadedImages={},i.preloadedAudios={};function X(t){throw i.onAbort&&i.onAbort(t),t="Aborted("+t+")",et(t),ze=!0,new WebAssembly.RuntimeError(t+". Build with -s ASSERTIONS=1 for more info.")}function Ye(){return H.startsWith("data:application/octet-stream;base64,")}var H;if(H="sql-wasm.wasm",!Ye()){var Xe=H;H=i.locateFile?i.locateFile(Xe,R):R+Xe}function Ze(){var t=H;try{if(t==H&&_t)return new Uint8Array(_t);if(Bt)return Bt(t);throw"both async and sync fetching of the wasm failed"}catch(e){X(e)}}function or(){if(!_t&&(W||M)){if(typeof fetch=="function"&&!H.startsWith("file://"))return fetch(H,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+H+"'";return t.arrayBuffer()}).catch(function(){return Ze()});if(Lt)return new Promise(function(t,e){Lt(H,function(n){t(new Uint8Array(n))},e)})}return Promise.resolve().then(function(){return Ze()})}var x,U;function ge(t){for(;0<t.length;){var e=t.shift();if(typeof e=="function")e(i);else{var n=e.Jb;typeof n=="number"?e.fb===void 0?Ot(n)():Ot(n)(e.fb):n(e.fb===void 0?null:e.fb)}}}var mt=[];function Ot(t){var e=mt[t];return e||(t>=mt.length&&(mt.length=t+1),mt[t]=e=it.get(t)),e}function _e(t,e){for(var n=0,r=t.length-1;0<=r;r--){var o=t[r];o==="."?t.splice(r,1):o===".."?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n;n--)t.unshift("..");return t}function K(t){var e=t.charAt(0)==="/",n=t.substr(-1)==="/";return(t=_e(t.split("/").filter(function(r){return!!r}),!e).join("/"))||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t}function sr(t){var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1);return t=e[0],e=e[1],!t&&!e?".":(e&&(e=e.substr(0,e.length-1)),t+e)}function Pt(t){if(t==="/")return"/";t=K(t),t=t.replace(/\/$/,"");var e=t.lastIndexOf("/");return e===-1?t:t.substr(e+1)}function ar(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var t=new Uint8Array(1);return function(){return crypto.getRandomValues(t),t[0]}}if(B)try{var e=require("crypto");return function(){return e.randomBytes(1)[0]}}catch{}return function(){X("randomDevice")}}function Ht(){for(var t="",e=!1,n=arguments.length-1;-1<=n&&!e;n--){if(e=0<=n?arguments[n]:"/",typeof e!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!e)return"";t=e+"/"+t,e=e.charAt(0)==="/"}return t=_e(t.split("/").filter(function(r){return!!r}),!e).join("/"),(e?"/":"")+t||"."}var tn=[];function en(t,e){tn[t]={input:[],output:[],Xa:e},De(t,ur)}var ur={open:function(t){var e=tn[t.node.rdev];if(!e)throw new u(43);t.tty=e,t.seekable=!1},close:function(t){t.tty.Xa.flush(t.tty)},flush:function(t){t.tty.Xa.flush(t.tty)},read:function(t,e,n,r){if(!t.tty||!t.tty.Xa.tb)throw new u(60);for(var o=0,s=0;s<r;s++){try{var m=t.tty.Xa.tb(t.tty)}catch{throw new u(29)}if(m===void 0&&o===0)throw new u(6);if(m==null)break;o++,e[n+s]=m}return o&&(t.node.timestamp=Date.now()),o},write:function(t,e,n,r){if(!t.tty||!t.tty.Xa.jb)throw new u(60);try{for(var o=0;o<r;o++)t.tty.Xa.jb(t.tty,e[n+o])}catch{throw new u(29)}return r&&(t.node.timestamp=Date.now()),o}},lr={tb:function(t){if(!t.input.length){var e=null;if(B){var n=Buffer.alloc(256),r=0;try{r=Rt.readSync(process.stdin.fd,n,0,256,-1)}catch(o){if(o.toString().includes("EOF"))r=0;else throw o}0<r?e=n.slice(0,r).toString("utf-8"):e=null}else typeof window<"u"&&typeof window.prompt=="function"?(e=window.prompt("Input: "),e!==null&&(e+=`
`)):typeof readline=="function"&&(e=readline(),e!==null&&(e+=`
`));if(!e)return null;t.input=xn(e,!0)}return t.input.shift()},jb:function(t,e){e===null||e===10?(Ne(ct(t.output,0)),t.output=[]):e!=0&&t.output.push(e)},flush:function(t){t.output&&0<t.output.length&&(Ne(ct(t.output,0)),t.output=[])}},fr={jb:function(t,e){e===null||e===10?(et(ct(t.output,0)),t.output=[]):e!=0&&t.output.push(e)},flush:function(t){t.output&&0<t.output.length&&(et(ct(t.output,0)),t.output=[])}},g={Pa:null,Qa:function(){return g.createNode(null,"/",16895,0)},createNode:function(t,e,n,r){if((n&61440)===24576||(n&61440)===4096)throw new u(63);return g.Pa||(g.Pa={dir:{node:{Oa:g.Ga.Oa,Na:g.Ga.Na,lookup:g.Ga.lookup,$a:g.Ga.$a,rename:g.Ga.rename,unlink:g.Ga.unlink,rmdir:g.Ga.rmdir,readdir:g.Ga.readdir,symlink:g.Ga.symlink},stream:{Ta:g.Ha.Ta}},file:{node:{Oa:g.Ga.Oa,Na:g.Ga.Na},stream:{Ta:g.Ha.Ta,read:g.Ha.read,write:g.Ha.write,lb:g.Ha.lb,ab:g.Ha.ab,bb:g.Ha.bb}},link:{node:{Oa:g.Ga.Oa,Na:g.Ga.Na,readlink:g.Ga.readlink},stream:{}},pb:{node:{Oa:g.Ga.Oa,Na:g.Ga.Na},stream:dr}}),n=sn(t,e,n,r),(n.mode&61440)===16384?(n.Ga=g.Pa.dir.node,n.Ha=g.Pa.dir.stream,n.Ia={}):(n.mode&61440)===32768?(n.Ga=g.Pa.file.node,n.Ha=g.Pa.file.stream,n.Ma=0,n.Ia=null):(n.mode&61440)===40960?(n.Ga=g.Pa.link.node,n.Ha=g.Pa.link.stream):(n.mode&61440)===8192&&(n.Ga=g.Pa.pb.node,n.Ha=g.Pa.pb.stream),n.timestamp=Date.now(),t&&(t.Ia[e]=n,t.timestamp=n.timestamp),n},Kb:function(t){return t.Ia?t.Ia.subarray?t.Ia.subarray(0,t.Ma):new Uint8Array(t.Ia):new Uint8Array(0)},qb:function(t,e){var n=t.Ia?t.Ia.length:0;n>=e||(e=Math.max(e,n*(1048576>n?2:1.125)>>>0),n!=0&&(e=Math.max(e,256)),n=t.Ia,t.Ia=new Uint8Array(e),0<t.Ma&&t.Ia.set(n.subarray(0,t.Ma),0))},Gb:function(t,e){if(t.Ma!=e)if(e==0)t.Ia=null,t.Ma=0;else{var n=t.Ia;t.Ia=new Uint8Array(e),n&&t.Ia.set(n.subarray(0,Math.min(e,t.Ma))),t.Ma=e}},Ga:{Oa:function(t){var e={};return e.dev=(t.mode&61440)===8192?t.id:1,e.ino=t.id,e.mode=t.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=t.rdev,(t.mode&61440)===16384?e.size=4096:(t.mode&61440)===32768?e.size=t.Ma:(t.mode&61440)===40960?e.size=t.link.length:e.size=0,e.atime=new Date(t.timestamp),e.mtime=new Date(t.timestamp),e.ctime=new Date(t.timestamp),e.Ab=4096,e.blocks=Math.ceil(e.size/e.Ab),e},Na:function(t,e){e.mode!==void 0&&(t.mode=e.mode),e.timestamp!==void 0&&(t.timestamp=e.timestamp),e.size!==void 0&&g.Gb(t,e.size)},lookup:function(){throw ke[44]},$a:function(t,e,n,r){return g.createNode(t,e,n,r)},rename:function(t,e,n){if((t.mode&61440)===16384){try{var r=st(e,n)}catch{}if(r)for(var o in r.Ia)throw new u(55)}delete t.parent.Ia[t.name],t.parent.timestamp=Date.now(),t.name=n,e.Ia[n]=t,e.timestamp=t.parent.timestamp,t.parent=e},unlink:function(t,e){delete t.Ia[e],t.timestamp=Date.now()},rmdir:function(t,e){var n=st(t,e),r;for(r in n.Ia)throw new u(55);delete t.Ia[e],t.timestamp=Date.now()},readdir:function(t){var e=[".",".."],n;for(n in t.Ia)t.Ia.hasOwnProperty(n)&&e.push(n);return e},symlink:function(t,e,n){return t=g.createNode(t,e,41471,0),t.link=n,t},readlink:function(t){if((t.mode&61440)!==40960)throw new u(28);return t.link}},Ha:{read:function(t,e,n,r,o){var s=t.node.Ia;if(o>=t.node.Ma)return 0;if(t=Math.min(t.node.Ma-o,r),8<t&&s.subarray)e.set(s.subarray(o,o+t),n);else for(r=0;r<t;r++)e[n+r]=s[o+r];return t},write:function(t,e,n,r,o,s){if(e.buffer===E.buffer&&(s=!1),!r)return 0;if(t=t.node,t.timestamp=Date.now(),e.subarray&&(!t.Ia||t.Ia.subarray)){if(s)return t.Ia=e.subarray(n,n+r),t.Ma=r;if(t.Ma===0&&o===0)return t.Ia=e.slice(n,n+r),t.Ma=r;if(o+r<=t.Ma)return t.Ia.set(e.subarray(n,n+r),o),r}if(g.qb(t,o+r),t.Ia.subarray&&e.subarray)t.Ia.set(e.subarray(n,n+r),o);else for(s=0;s<r;s++)t.Ia[o+s]=e[n+s];return t.Ma=Math.max(t.Ma,o+r),r},Ta:function(t,e,n){if(n===1?e+=t.position:n===2&&(t.node.mode&61440)===32768&&(e+=t.node.Ma),0>e)throw new u(28);return e},lb:function(t,e,n){g.qb(t.node,e+n),t.node.Ma=Math.max(t.node.Ma,e+n)},ab:function(t,e,n,r,o,s){if(e!==0)throw new u(28);if((t.node.mode&61440)!==32768)throw new u(43);if(t=t.node.Ia,s&2||t.buffer!==de){if((0<r||r+n<t.length)&&(t.subarray?t=t.subarray(r,r+n):t=Array.prototype.slice.call(t,r,r+n)),r=!0,n=65536*Math.ceil(n/65536),(s=Sn(65536,n))?(G.fill(0,s,s+n),n=s):n=0,!n)throw new u(48);E.set(t,n)}else r=!1,n=t.byteOffset;return{Fb:n,vb:r}},bb:function(t,e,n,r,o){if((t.node.mode&61440)!==32768)throw new u(43);return o&2||g.Ha.write(t,e,0,r,n,!1),0}}},ve=null,nn={},j=[],cr=1,Z=null,rn=!0,u=null,ke={},O=(t,e={})=>{if(t=Ht("/",t),!t)return{path:"",node:null};if(e=Object.assign({rb:!0,kb:0},e),8<e.kb)throw new u(32);t=_e(t.split("/").filter(m=>!!m),!1);for(var n=ve,r="/",o=0;o<t.length;o++){var s=o===t.length-1;if(s&&e.parent)break;if(n=st(n,t[o]),r=K(r+"/"+t[o]),n.Va&&(!s||s&&e.rb)&&(n=n.Va.root),!s||e.Sa){for(s=0;(n.mode&61440)===40960;)if(n=mn(r),r=Ht(sr(r),n),n=O(r,{kb:e.kb+1}).node,40<s++)throw new u(32)}}return{path:r,node:n}},qt=t=>{for(var e;;){if(t===t.parent)return t=t.Qa.ub,e?t[t.length-1]!=="/"?t+"/"+e:t+e:t;e=e?t.name+"/"+e:t.name,t=t.parent}},qe=(t,e)=>{for(var n=0,r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r)|0;return(t+n>>>0)%Z.length},on=t=>{var e=qe(t.parent.id,t.name);if(Z[e]===t)Z[e]=t.Wa;else for(e=Z[e];e;){if(e.Wa===t){e.Wa=t.Wa;break}e=e.Wa}},st=(t,e)=>{var n;if(n=(n=ht(t,"x"))?n:t.Ga.lookup?0:2)throw new u(n,t);for(n=Z[qe(t.id,e)];n;n=n.Wa){var r=n.name;if(n.parent.id===t.id&&r===e)return n}return t.Ga.lookup(t,e)},sn=(t,e,n,r)=>(t=new Dn(t,e,n,r),e=qe(t.parent.id,t.name),t.Wa=Z[e],Z[e]=t),pr={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},an=t=>{var e=["r","w","rw"][t&3];return t&512&&(e+="w"),e},ht=(t,e)=>{if(rn)return 0;if(!e.includes("r")||t.mode&292){if(e.includes("w")&&!(t.mode&146)||e.includes("x")&&!(t.mode&73))return 2}else return 2;return 0},un=(t,e)=>{try{return st(t,e),20}catch{}return ht(t,"wx")},ln=(t,e,n)=>{try{var r=st(t,e)}catch(o){return o.Ka}if(t=ht(t,"wx"))return t;if(n){if((r.mode&61440)!==16384)return 54;if(r===r.parent||qt(r)==="/")return 10}else if((r.mode&61440)===16384)return 31;return 0},mr=(t=0,e=4096)=>{for(;t<=e;t++)if(!j[t])return t;throw new u(33)},hr=(t,e)=>(Ct||(Ct=function(){},Ct.prototype={}),t=Object.assign(new Ct,t),e=mr(e,void 0),t.fd=e,j[e]=t),dr={open:t=>{t.Ha=nn[t.node.rdev].Ha,t.Ha.open&&t.Ha.open(t)},Ta:()=>{throw new u(70)}},De=(t,e)=>{nn[t]={Ha:e}},fn=(t,e)=>{var n=e==="/",r=!e;if(n&&ve)throw new u(10);if(!n&&!r){var o=O(e,{rb:!1});if(e=o.path,o=o.node,o.Va)throw new u(10);if((o.mode&61440)!==16384)throw new u(54)}e={type:t,Lb:{},ub:e,Eb:[]},t=t.Qa(e),t.Qa=e,e.root=t,n?ve=t:o&&(o.Va=e,o.Qa&&o.Qa.Eb.push(e))},Ut=(t,e,n)=>{var r=O(t,{parent:!0}).node;if(t=Pt(t),!t||t==="."||t==="..")throw new u(28);var o=un(r,t);if(o)throw new u(o);if(!r.Ga.$a)throw new u(63);return r.Ga.$a(r,t,e,n)},z=(t,e)=>Ut(t,(e!==void 0?e:511)&1023|16384,0),Gt=(t,e,n)=>{typeof n>"u"&&(n=e,e=438),Ut(t,e|8192,n)},xe=(t,e)=>{if(!Ht(t))throw new u(44);var n=O(e,{parent:!0}).node;if(!n)throw new u(44);e=Pt(e);var r=un(n,e);if(r)throw new u(r);if(!n.Ga.symlink)throw new u(63);n.Ga.symlink(n,e,t)},cn=t=>{var e=O(t,{parent:!0}).node;t=Pt(t);var n=st(e,t),r=ln(e,t,!0);if(r)throw new u(r);if(!e.Ga.rmdir)throw new u(63);if(n.Va)throw new u(10);e.Ga.rmdir(e,t),on(n)},pn=t=>{var e=O(t,{parent:!0}).node;if(!e)throw new u(44);t=Pt(t);var n=st(e,t),r=ln(e,t,!1);if(r)throw new u(r);if(!e.Ga.unlink)throw new u(63);if(n.Va)throw new u(10);e.Ga.unlink(e,t),on(n)},mn=t=>{if(t=O(t).node,!t)throw new u(44);if(!t.Ga.readlink)throw new u(28);return Ht(qt(t.parent),t.Ga.readlink(t))},Dt=(t,e)=>{if(t=O(t,{Sa:!e}).node,!t)throw new u(44);if(!t.Ga.Oa)throw new u(63);return t.Ga.Oa(t)},hn=t=>Dt(t,!0),jt=(t,e)=>{if(t=typeof t=="string"?O(t,{Sa:!0}).node:t,!t.Ga.Na)throw new u(63);t.Ga.Na(t,{mode:e&4095|t.mode&-4096,timestamp:Date.now()})},dn=(t,e)=>{if(0>e)throw new u(28);if(t=typeof t=="string"?O(t,{Sa:!0}).node:t,!t.Ga.Na)throw new u(63);if((t.mode&61440)===16384)throw new u(31);if((t.mode&61440)!==32768)throw new u(28);var n=ht(t,"w");if(n)throw new u(n);t.Ga.Na(t,{size:e,timestamp:Date.now()})},at=(t,e,n,r)=>{if(t==="")throw new u(44);if(typeof e=="string"){var o=pr[e];if(typeof o>"u")throw Error("Unknown file open mode: "+e);e=o}if(n=e&64?(typeof n>"u"?438:n)&4095|32768:0,typeof t=="object")var s=t;else{t=K(t);try{s=O(t,{Sa:!(e&131072)}).node}catch{}}if(o=!1,e&64)if(s){if(e&128)throw new u(20)}else s=Ut(t,n,0),o=!0;if(!s)throw new u(44);if((s.mode&61440)===8192&&(e&=-513),e&65536&&(s.mode&61440)!==16384)throw new u(54);if(!o&&(n=s?(s.mode&61440)===40960?32:(s.mode&61440)===16384&&(an(e)!=="r"||e&512)?31:ht(s,an(e)):44))throw new u(n);return e&512&&dn(s,0),e&=-131713,r=hr({node:s,path:qt(s),flags:e,seekable:!0,position:0,Ha:s.Ha,Ib:[],error:!1},r),r.Ha.open&&r.Ha.open(r),!i.logReadFiles||e&1||(Ft||(Ft={}),t in Ft||(Ft[t]=1)),r},Ie=t=>{if(t.fd===null)throw new u(8);t.hb&&(t.hb=null);try{t.Ha.close&&t.Ha.close(t)}catch(e){throw e}finally{j[t.fd]=null}t.fd=null},yn=(t,e,n)=>{if(t.fd===null)throw new u(8);if(!t.seekable||!t.Ha.Ta)throw new u(70);if(n!=0&&n!=1&&n!=2)throw new u(28);t.position=t.Ha.Ta(t,e,n),t.Ib=[]},bn=(t,e,n,r,o)=>{if(0>r||0>o)throw new u(28);if(t.fd===null)throw new u(8);if((t.flags&2097155)===1)throw new u(8);if((t.node.mode&61440)===16384)throw new u(31);if(!t.Ha.read)throw new u(28);var s=typeof o<"u";if(!s)o=t.position;else if(!t.seekable)throw new u(70);return e=t.Ha.read(t,e,n,r,o),s||(t.position+=e),e},wn=(t,e,n,r,o,s)=>{if(0>r||0>o)throw new u(28);if(t.fd===null)throw new u(8);if((t.flags&2097155)===0)throw new u(8);if((t.node.mode&61440)===16384)throw new u(31);if(!t.Ha.write)throw new u(28);t.seekable&&t.flags&1024&&yn(t,0,2);var m=typeof o<"u";if(!m)o=t.position;else if(!t.seekable)throw new u(70);return e=t.Ha.write(t,e,n,r,o,s),m||(t.position+=e),e},yr=t=>{var e="binary";if(e!=="utf8"&&e!=="binary")throw Error('Invalid encoding type "'+e+'"');var n,r=at(t,r||0);t=Dt(t).size;var o=new Uint8Array(t);return bn(r,o,0,t,0),e==="utf8"?n=ct(o,0):e==="binary"&&(n=o),Ie(r),n},gn=()=>{u||(u=function(t,e){this.node=e,this.Hb=function(n){this.Ka=n},this.Hb(t),this.message="FS error"},u.prototype=Error(),u.prototype.constructor=u,[44].forEach(t=>{ke[t]=new u(t),ke[t].stack="<generic error, no stack>"}))},_n,vn=(t,e)=>{var n=0;return t&&(n|=365),e&&(n|=146),n},xt=(t,e,n)=>{t=K("/dev/"+t);var r=vn(!!e,!!n);Se||(Se=64);var o=Se++<<8|0;De(o,{open:s=>{s.seekable=!1},close:()=>{n&&n.buffer&&n.buffer.length&&n(10)},read:(s,m,_,v)=>{for(var k=0,L=0;L<v;L++){try{var V=e()}catch{throw new u(29)}if(V===void 0&&k===0)throw new u(6);if(V==null)break;k++,m[_+L]=V}return k&&(s.node.timestamp=Date.now()),k},write:(s,m,_,v)=>{for(var k=0;k<v;k++)try{n(m[_+k])}catch{throw new u(29)}return v&&(s.node.timestamp=Date.now()),k}}),Gt(t,r,o)},Se,D={},Ct,Ft;function dt(t,e,n){if(e[0]==="/")return e;if(t===-100)t="/";else{if(t=j[t],!t)throw new u(8);t=t.path}if(e.length==0){if(!n)throw new u(44);return t}return K(t+"/"+e)}function Nt(t,e,n){try{var r=t(e)}catch(o){if(o&&o.node&&K(e)!==K(qt(o.node)))return-54;throw o}return h[n>>2]=r.dev,h[n+4>>2]=0,h[n+8>>2]=r.ino,h[n+12>>2]=r.mode,h[n+16>>2]=r.nlink,h[n+20>>2]=r.uid,h[n+24>>2]=r.gid,h[n+28>>2]=r.rdev,h[n+32>>2]=0,U=[r.size>>>0,(x=r.size,1<=+Math.abs(x)?0<x?(Math.min(+Math.floor(x/4294967296),4294967295)|0)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)],h[n+40>>2]=U[0],h[n+44>>2]=U[1],h[n+48>>2]=4096,h[n+52>>2]=r.blocks,h[n+56>>2]=r.atime.getTime()/1e3|0,h[n+60>>2]=0,h[n+64>>2]=r.mtime.getTime()/1e3|0,h[n+68>>2]=0,h[n+72>>2]=r.ctime.getTime()/1e3|0,h[n+76>>2]=0,U=[r.ino>>>0,(x=r.ino,1<=+Math.abs(x)?0<x?(Math.min(+Math.floor(x/4294967296),4294967295)|0)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)],h[n+80>>2]=U[0],h[n+84>>2]=U[1],0}var zt=void 0;function Wt(){return zt+=4,h[zt-4>>2]}function tt(t){if(t=j[t],!t)throw new u(8);return t}function br(t,e,n){function r(v){return(v=v.toTimeString().match(/\(([A-Za-z ]+)\)$/))?v[1]:"GMT"}var o=new Date().getFullYear(),s=new Date(o,0,1),m=new Date(o,6,1);o=s.getTimezoneOffset();var _=m.getTimezoneOffset();h[t>>2]=60*Math.max(o,_),h[e>>2]=Number(o!=_),t=r(s),e=r(m),t=Qe(t),e=Qe(e),_<o?(h[n>>2]=t,h[n+4>>2]=e):(h[n>>2]=e,h[n+4>>2]=t)}function Ee(t,e,n){Ee.Bb||(Ee.Bb=!0,br(t,e,n))}var kn;kn=B?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now();var Ae={};function qn(){if(!Le){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:S||"./this.program"},e;for(e in Ae)Ae[e]===void 0?delete t[e]:t[e]=Ae[e];var n=[];for(e in t)n.push(e+"="+t[e]);Le=n}return Le}var Le;function Dn(t,e,n,r){t||(t=this),this.parent=t,this.Qa=t.Qa,this.Va=null,this.id=cr++,this.name=e,this.mode=n,this.Ga={},this.Ha={},this.rdev=r}Object.defineProperties(Dn.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(t){t?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(t){t?this.mode|=146:this.mode&=-147}}}),gn(),Z=Array(4096),fn(g,"/"),z("/tmp"),z("/home"),z("/home/web_user"),(()=>{z("/dev"),De(259,{read:()=>0,write:(e,n,r,o)=>o}),Gt("/dev/null",259),en(1280,lr),en(1536,fr),Gt("/dev/tty",1280),Gt("/dev/tty1",1536);var t=ar();xt("random",t),xt("urandom",t),z("/dev/shm"),z("/dev/shm/tmp")})(),(()=>{z("/proc");var t=z("/proc/self");z("/proc/self/fd"),fn({Qa:()=>{var e=sn(t,"fd",16895,73);return e.Ga={lookup:(n,r)=>{var o=j[+r];if(!o)throw new u(8);return n={parent:null,Qa:{ub:"fake"},Ga:{readlink:()=>o.path}},n.parent=n}},e}},"/proc/self/fd")})();function xn(t,e){var n=Array(pt(t)+1);return t=rt(t,n,0,n.length),e&&(n.length=t),n}var wr={a:function(t,e,n,r){X("Assertion failed: "+A(t)+", at: "+[e?A(e):"unknown filename",n,r?A(r):"unknown function"])},g:function(t,e){try{return t=A(t),jt(t,e),0}catch(n){if(typeof D>"u"||!(n instanceof u))throw n;return-n.Ka}},I:function(t,e,n){try{if(e=A(e),e=dt(t,e),n&-8)var r=-28;else{var o=O(e,{Sa:!0}).node;o?(t="",n&4&&(t+="r"),n&2&&(t+="w"),n&1&&(t+="x"),r=t&&ht(o,t)?-2:0):r=-44}return r}catch(s){if(typeof D>"u"||!(s instanceof u))throw s;return-s.Ka}},h:function(t,e){try{var n=j[t];if(!n)throw new u(8);return jt(n.node,e),0}catch(r){if(typeof D>"u"||!(r instanceof u))throw r;return-r.Ka}},H:function(t){try{var e=j[t];if(!e)throw new u(8);var n=e.node,r=typeof n=="string"?O(n,{Sa:!0}).node:n;if(!r.Ga.Na)throw new u(63);return r.Ga.Na(r,{timestamp:Date.now()}),0}catch(o){if(typeof D>"u"||!(o instanceof u))throw o;return-o.Ka}},b:function(t,e,n){zt=n;try{var r=tt(t);switch(e){case 0:var o=Wt();return 0>o?-28:at(r.path,r.flags,0,o).fd;case 1:case 2:return 0;case 3:return r.flags;case 4:return o=Wt(),r.flags|=o,0;case 5:return o=Wt(),Tt[o+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return h[In()>>2]=28,-1;default:return-28}}catch(s){if(typeof D>"u"||!(s instanceof u))throw s;return-s.Ka}},G:function(t,e){try{var n=tt(t);return Nt(Dt,n.path,e)}catch(r){if(typeof D>"u"||!(r instanceof u))throw r;return-r.Ka}},B:function(t,e){try{var n=j[t];if(!n)throw new u(8);if((n.flags&2097155)===0)throw new u(28);return dn(n.node,e),0}catch(r){if(typeof D>"u"||!(r instanceof u))throw r;return-r.Ka}},A:function(t,e){try{return e===0?-28:e<pt("/")+1?-68:(rt("/",G,t,e),t)}catch(n){if(typeof D>"u"||!(n instanceof u))throw n;return-n.Ka}},E:function(t,e){try{return t=A(t),Nt(hn,t,e)}catch(n){if(typeof D>"u"||!(n instanceof u))throw n;return-n.Ka}},x:function(t,e){try{return t=A(t),t=K(t),t[t.length-1]==="/"&&(t=t.substr(0,t.length-1)),z(t,e),0}catch(n){if(typeof D>"u"||!(n instanceof u))throw n;return-n.Ka}},D:function(t,e,n,r){try{e=A(e);var o=r&256;return e=dt(t,e,r&4096),Nt(o?hn:Dt,e,n)}catch(s){if(typeof D>"u"||!(s instanceof u))throw s;return-s.Ka}},u:function(t,e,n,r){zt=r;try{e=A(e),e=dt(t,e);var o=r?Wt():0;return at(e,n,o).fd}catch(s){if(typeof D>"u"||!(s instanceof u))throw s;return-s.Ka}},s:function(t,e,n,r){try{if(e=A(e),e=dt(t,e),0>=r)var o=-28;else{var s=mn(e),m=Math.min(r,pt(s)),_=E[n+m];rt(s,G,n,r+1),E[n+m]=_,o=m}return o}catch(v){if(typeof D>"u"||!(v instanceof u))throw v;return-v.Ka}},r:function(t){try{return t=A(t),cn(t),0}catch(e){if(typeof D>"u"||!(e instanceof u))throw e;return-e.Ka}},F:function(t,e){try{return t=A(t),Nt(Dt,t,e)}catch(n){if(typeof D>"u"||!(n instanceof u))throw n;return-n.Ka}},n:function(t,e,n){try{return e=A(e),e=dt(t,e),n===0?pn(e):n===512?cn(e):X("Invalid flags passed to unlinkat"),0}catch(r){if(typeof D>"u"||!(r instanceof u))throw r;return-r.Ka}},m:function(t,e,n){try{if(e=A(e),e=dt(t,e,!0),n){var r=h[n>>2],o=h[n+4>>2];s=1e3*r+o/1e6,n+=8,r=h[n>>2],o=h[n+4>>2],m=1e3*r+o/1e6}else var s=Date.now(),m=s;t=s;var _=O(e,{Sa:!0}).node;return _.Ga.Na(_,{timestamp:Math.max(t,m)}),0}catch(v){if(typeof D>"u"||!(v instanceof u))throw v;return-v.Ka}},e:function(){return Date.now()},i:function(t,e){t=new Date(1e3*h[t>>2]),h[e>>2]=t.getSeconds(),h[e+4>>2]=t.getMinutes(),h[e+8>>2]=t.getHours(),h[e+12>>2]=t.getDate(),h[e+16>>2]=t.getMonth(),h[e+20>>2]=t.getFullYear()-1900,h[e+24>>2]=t.getDay();var n=new Date(t.getFullYear(),0,1);h[e+28>>2]=(t.getTime()-n.getTime())/864e5|0,h[e+36>>2]=-(60*t.getTimezoneOffset());var r=new Date(t.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),h[e+32>>2]=(r!=n&&t.getTimezoneOffset()==Math.min(n,r))|0},v:function(t,e,n,r,o,s,m){try{var _=j[o];if(!_)return-8;if((n&2)!==0&&(r&2)===0&&(_.flags&2097155)!==2)throw new u(2);if((_.flags&2097155)===1)throw new u(2);if(!_.Ha.ab)throw new u(43);var v=_.Ha.ab(_,t,e,s,n,r),k=v.Fb;return h[m>>2]=v.vb,k}catch(L){if(typeof D>"u"||!(L instanceof u))throw L;return-L.Ka}},w:function(t,e,n,r,o,s){try{var m=j[o];if(m&&n&2){var _=G.slice(t,t+e);m&&m.Ha.bb&&m.Ha.bb(m,_,s,e,r)}}catch(v){if(typeof D>"u"||!(v instanceof u))throw v;return-v.Ka}},j:Ee,p:function(){return 2147483648},d:kn,o:function(t,e,n){G.copyWithin(t,e,e+n)},c:function(t){var e=G.length;if(t>>>=0,2147483648<t)return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var o=Math;r=Math.max(t,r),o=o.min.call(o,2147483648,r+(65536-r%65536)%65536);t:{try{me.grow(o-de.byteLength+65535>>>16),Ke();var s=1;break t}catch{}s=void 0}if(s)return!0}return!1},y:function(t,e){var n=0;return qn().forEach(function(r,o){var s=e+n;for(o=h[t+4*o>>2]=s,s=0;s<r.length;++s)E[o++>>0]=r.charCodeAt(s);E[o>>0]=0,n+=r.length+1}),0},z:function(t,e){var n=qn();h[t>>2]=n.length;var r=0;return n.forEach(function(o){r+=o.length+1}),h[e>>2]=r,0},f:function(t){try{var e=tt(t);return Ie(e),0}catch(n){if(typeof D>"u"||!(n instanceof u))throw n;return n.Ka}},l:function(t,e){try{var n=tt(t);return E[e>>0]=n.tty?2:(n.mode&61440)===16384?3:(n.mode&61440)===40960?7:4,0}catch(r){if(typeof D>"u"||!(r instanceof u))throw r;return r.Ka}},t:function(t,e,n,r){try{t:{for(var o=tt(t),s=t=0;s<n;s++){var m=h[e+(8*s+4)>>2],_=bn(o,E,h[e+8*s>>2],m,void 0);if(0>_){var v=-1;break t}if(t+=_,_<m)break}v=t}return h[r>>2]=v,0}catch(k){if(typeof D>"u"||!(k instanceof u))throw k;return k.Ka}},k:function(t,e,n,r,o){try{var s=tt(t);return t=4294967296*n+(e>>>0),-9007199254740992>=t||9007199254740992<=t?-61:(yn(s,t,r),U=[s.position>>>0,(x=s.position,1<=+Math.abs(x)?0<x?(Math.min(+Math.floor(x/4294967296),4294967295)|0)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)],h[o>>2]=U[0],h[o+4>>2]=U[1],s.hb&&t===0&&r===0&&(s.hb=null),0)}catch(m){if(typeof D>"u"||!(m instanceof u))throw m;return m.Ka}},C:function(t){try{var e=tt(t);return e.Ha&&e.Ha.fsync?-e.Ha.fsync(e):0}catch(n){if(typeof D>"u"||!(n instanceof u))throw n;return n.Ka}},q:function(t,e,n,r){try{t:{for(var o=tt(t),s=t=0;s<n;s++){var m=wn(o,E,h[e+8*s>>2],h[e+(8*s+4)>>2],void 0);if(0>m){var _=-1;break t}t+=m}_=t}return h[r>>2]=_,0}catch(v){if(typeof D>"u"||!(v instanceof u))throw v;return v.Ka}}};(function(){function t(o){i.asm=o.exports,me=i.asm.J,Ke(),it=i.asm.Aa,Ve.unshift(i.asm.K),ot--,i.monitorRunDependencies&&i.monitorRunDependencies(ot),ot==0&&(we!==null&&(clearInterval(we),we=null),kt&&(o=kt,kt=null,o()))}function e(o){t(o.instance)}function n(o){return or().then(function(s){return WebAssembly.instantiate(s,r)}).then(function(s){return s}).then(o,function(s){et("failed to asynchronously prepare wasm: "+s),X(s)})}var r={a:wr};if(ot++,i.monitorRunDependencies&&i.monitorRunDependencies(ot),i.instantiateWasm)try{return i.instantiateWasm(r,t)}catch(o){return et("Module.instantiateWasm callback failed with error: "+o),!1}return function(){return _t||typeof WebAssembly.instantiateStreaming!="function"||Ye()||H.startsWith("file://")||typeof fetch!="function"?n(e):fetch(H,{credentials:"same-origin"}).then(function(o){return WebAssembly.instantiateStreaming(o,r).then(e,function(s){return et("wasm streaming compile failed: "+s),et("falling back to ArrayBuffer instantiation"),n(e)})})}(),{}})(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.K).apply(null,arguments)},i._sqlite3_free=function(){return(i._sqlite3_free=i.asm.L).apply(null,arguments)};var In=i.___errno_location=function(){return(In=i.___errno_location=i.asm.M).apply(null,arguments)};i._sqlite3_step=function(){return(i._sqlite3_step=i.asm.N).apply(null,arguments)},i._sqlite3_finalize=function(){return(i._sqlite3_finalize=i.asm.O).apply(null,arguments)},i._sqlite3_prepare_v2=function(){return(i._sqlite3_prepare_v2=i.asm.P).apply(null,arguments)},i._sqlite3_reset=function(){return(i._sqlite3_reset=i.asm.Q).apply(null,arguments)},i._sqlite3_clear_bindings=function(){return(i._sqlite3_clear_bindings=i.asm.R).apply(null,arguments)},i._sqlite3_value_blob=function(){return(i._sqlite3_value_blob=i.asm.S).apply(null,arguments)},i._sqlite3_value_text=function(){return(i._sqlite3_value_text=i.asm.T).apply(null,arguments)},i._sqlite3_value_bytes=function(){return(i._sqlite3_value_bytes=i.asm.U).apply(null,arguments)},i._sqlite3_value_double=function(){return(i._sqlite3_value_double=i.asm.V).apply(null,arguments)},i._sqlite3_value_int=function(){return(i._sqlite3_value_int=i.asm.W).apply(null,arguments)},i._sqlite3_value_type=function(){return(i._sqlite3_value_type=i.asm.X).apply(null,arguments)},i._sqlite3_result_blob=function(){return(i._sqlite3_result_blob=i.asm.Y).apply(null,arguments)},i._sqlite3_result_double=function(){return(i._sqlite3_result_double=i.asm.Z).apply(null,arguments)},i._sqlite3_result_error=function(){return(i._sqlite3_result_error=i.asm._).apply(null,arguments)},i._sqlite3_result_int=function(){return(i._sqlite3_result_int=i.asm.$).apply(null,arguments)},i._sqlite3_result_int64=function(){return(i._sqlite3_result_int64=i.asm.aa).apply(null,arguments)},i._sqlite3_result_null=function(){return(i._sqlite3_result_null=i.asm.ba).apply(null,arguments)},i._sqlite3_result_text=function(){return(i._sqlite3_result_text=i.asm.ca).apply(null,arguments)},i._sqlite3_column_count=function(){return(i._sqlite3_column_count=i.asm.da).apply(null,arguments)},i._sqlite3_data_count=function(){return(i._sqlite3_data_count=i.asm.ea).apply(null,arguments)},i._sqlite3_column_blob=function(){return(i._sqlite3_column_blob=i.asm.fa).apply(null,arguments)},i._sqlite3_column_bytes=function(){return(i._sqlite3_column_bytes=i.asm.ga).apply(null,arguments)},i._sqlite3_column_double=function(){return(i._sqlite3_column_double=i.asm.ha).apply(null,arguments)},i._sqlite3_column_text=function(){return(i._sqlite3_column_text=i.asm.ia).apply(null,arguments)},i._sqlite3_column_type=function(){return(i._sqlite3_column_type=i.asm.ja).apply(null,arguments)},i._sqlite3_column_name=function(){return(i._sqlite3_column_name=i.asm.ka).apply(null,arguments)},i._sqlite3_bind_blob=function(){return(i._sqlite3_bind_blob=i.asm.la).apply(null,arguments)},i._sqlite3_bind_double=function(){return(i._sqlite3_bind_double=i.asm.ma).apply(null,arguments)},i._sqlite3_bind_int=function(){return(i._sqlite3_bind_int=i.asm.na).apply(null,arguments)},i._sqlite3_bind_text=function(){return(i._sqlite3_bind_text=i.asm.oa).apply(null,arguments)},i._sqlite3_bind_parameter_index=function(){return(i._sqlite3_bind_parameter_index=i.asm.pa).apply(null,arguments)},i._sqlite3_sql=function(){return(i._sqlite3_sql=i.asm.qa).apply(null,arguments)},i._sqlite3_normalized_sql=function(){return(i._sqlite3_normalized_sql=i.asm.ra).apply(null,arguments)},i._sqlite3_errmsg=function(){return(i._sqlite3_errmsg=i.asm.sa).apply(null,arguments)},i._sqlite3_exec=function(){return(i._sqlite3_exec=i.asm.ta).apply(null,arguments)},i._sqlite3_changes=function(){return(i._sqlite3_changes=i.asm.ua).apply(null,arguments)},i._sqlite3_close_v2=function(){return(i._sqlite3_close_v2=i.asm.va).apply(null,arguments)},i._sqlite3_create_function_v2=function(){return(i._sqlite3_create_function_v2=i.asm.wa).apply(null,arguments)},i._sqlite3_open=function(){return(i._sqlite3_open=i.asm.xa).apply(null,arguments)};var Qt=i._malloc=function(){return(Qt=i._malloc=i.asm.ya).apply(null,arguments)},Kt=i._free=function(){return(Kt=i._free=i.asm.za).apply(null,arguments)};i._RegisterExtensionFunctions=function(){return(i._RegisterExtensionFunctions=i.asm.Ba).apply(null,arguments)};var Sn=i._emscripten_builtin_memalign=function(){return(Sn=i._emscripten_builtin_memalign=i.asm.Ca).apply(null,arguments)},It=i.stackSave=function(){return(It=i.stackSave=i.asm.Da).apply(null,arguments)},St=i.stackRestore=function(){return(St=i.stackRestore=i.asm.Ea).apply(null,arguments)},$=i.stackAlloc=function(){return($=i.stackAlloc=i.asm.Fa).apply(null,arguments)};i.cwrap=function(t,e,n,r){n=n||[];var o=n.every(function(s){return s==="number"});return e!=="string"&&o&&!r?i["_"+t]:function(){return er(t,e,n,arguments)}},i.UTF8ToString=A,i.stackSave=It,i.stackRestore=St,i.stackAlloc=$;var $t;kt=function t(){$t||Be(),$t||(kt=t)};function Be(){function t(){if(!$t&&($t=!0,i.calledRun=!0,!ze)){if(i.noFSInit||_n||(_n=!0,gn(),i.stdin=i.stdin,i.stdout=i.stdout,i.stderr=i.stderr,i.stdin?xt("stdin",i.stdin):xe("/dev/tty","/dev/stdin"),i.stdout?xt("stdout",null,i.stdout):xe("/dev/tty","/dev/stdout"),i.stderr?xt("stderr",null,i.stderr):xe("/dev/tty1","/dev/stderr"),at("/dev/stdin",0),at("/dev/stdout",1),at("/dev/stderr",1)),rn=!1,ge(Ve),i.onRuntimeInitialized&&i.onRuntimeInitialized(),i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;){var e=i.postRun.shift();Je.unshift(e)}ge(Je)}}if(!(0<ot)){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)ir();ge($e),0<ot||(i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),t()},1)):t())}}if(i.run=Be,i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);0<i.preInit.length;)i.preInit.pop()();return Be(),d}),re)};typeof oe=="object"&&typeof ft=="object"?(ft.exports=ie,ft.exports.default=ie):typeof define=="function"&&define.amd?define([],function(){return ie}):typeof oe=="object"&&(oe.Module=ie)});var di={};ei(di,{default:()=>Xn});var ue=require("react");var Zt=require("react");var Jt=`
SELECT id, content, type, entityType, documentId
FROM BlockSearch(?)
ORDER BY rank + customRank
LIMIT ?
`,Gn=`
SELECT id, content, type, entityType, documentId
FROM BlockSearch
ORDER BY customRank
LIMIT ?
`,jn=`
SELECT id, content, type, entityType, documentId
FROM BlockSearch
WHERE entityType = 'document'
ORDER BY customRank
LIMIT ?
`,gt=40,Yt=l=>{if(!l||l.length===0)return"";let f=si(l);return`{content exactMatchContent} : (${ai(f).join(") OR (")})`},Xt=(l,f,p,d)=>{try{return l.exec(p,d).map(w=>w.values).flat().map(zn(f))}catch(w){return console.error(`db exec error: ${w}`),[]}},Cn=(l,f)=>{if(f.length===0)return[];let p=Nn(f),w=`select documentId, content from BlockSearch where entityType = 'document' and documentId in (${new Array(p.length).fill("?").join(", ")})`;try{return l.exec(w,p).map(i=>i.values).flat().map(([i,q])=>f.filter(S=>S.documentID===i).forEach(S=>S.documentName=q)),f}catch(i){return console.error(`db exec error: ${i}`),[]}},Fn=(l,f,p)=>{if(p.length===0)return[];let d=Nn(p),i=`SELECT id, content, type, entityType, documentId FROM BlockSearch WHERE documentId in (${new Array(d.length).fill("?").join(", ")})`;try{return l.exec(i,d).map(q=>q.values).flat().reduce(ri(f),[])}catch(q){return console.error(`db exec error: ${q}`),[]}},ri=l=>(f,p)=>{let d=zn(l)(p),w=f.find(i=>i.block.documentID===d.documentID);return w?oi(w,d):f.push(ii(d)),f},ii=l=>l.entityType==="document"?{block:l,blocks:[]}:{block:{documentID:l.documentID},blocks:[l]},oi=(l,f)=>{f.entityType==="document"?l.block=f:l.blocks.push(f)},Nn=l=>[...new Set(l.map(f=>f.documentID))],si=l=>l.split(/\s+/).map(f=>f.trim()).map(f=>f.replace('"'," ")).map(f=>`"${f}"`),ai=l=>{let f=[l.join(" "),l.join(" ")+"*"];return l.length>1&&f.push(l.join("* ")+"*"),f},zn=l=>([f,p,d,w,i])=>({id:f,content:p,type:d,entityType:w,documentID:i,spaceID:l});function Me({databasesLoading:l,databases:f},p){let[d,w]=(0,Zt.useState)({resultsLoading:!0,results:[]});return(0,Zt.useEffect)(()=>{if(l)return;w(B=>wt(bt({},B),{resultsLoading:!0}));let i=Yt(p),[q,S]=i.length>0?[Jt,[i,gt]]:[Gn,[gt]],M=f.map(({database:B,spaceID:R})=>({database:B,blocks:Xt(B,R,q,S)})).map(({database:B,blocks:R})=>Cn(B,R)).flat();w({results:M,resultsLoading:!1}),console.debug(`got ${M.length} results for query search '${p}'`)},[l,p]),d}var N=require("@raycast/api");var lt=require("@raycast/api");function At({query:l,spaceID:f}){return _jsx(lt.List.Item,{title:`Create '${l}'`,detail:_jsx(lt.List.Item.Detail,{markdown:`Create document '${l}'`}),actions:_jsx(lt.ActionPanel,null,_jsx(lt.Action.OpenInBrowser,{url:`craftdocs://createdocument?spaceId=${f}&title=${encodeURIComponent(l)}&content=&folderId=`}))})}function Te(l){let{isLoading:f,onSearchTextChange:p,blocks:d,query:w,config:i}=l,q=i?.primarySpace()?.spaceID||"";return _jsx(N.List,{isLoading:f,onSearchTextChange:p},d.map(S=>_jsx(ui,{key:S.id,block:S})),w.length>0&&_jsx(N.List.Section,{title:"Create new document"},_jsx(At,{query:w,spaceID:q})))}var ui=({block:l})=>_jsx(N.List.Item,{icon:l.entityType==="document"?{source:"doc_richtext.png",tintColor:N.Color.PrimaryText}:{source:"doc_on_doc.png",tintColor:N.Color.PrimaryText},subtitle:l.content,title:l.documentName||l.content,actions:_jsx(N.ActionPanel,null,_jsx(N.Action.OpenInBrowser,{title:"Open in Craft",url:`craftdocs://open?blockId=${l.id}&spaceId=${l.spaceID}`}))});var te=require("react"),Wn=require("@raycast/api");function Oe(){let[l,f]=(0,te.useState)({appExistsLoading:!0,appExists:!1});return(0,te.useEffect)(()=>{(0,Wn.getApplications)().then(p=>p.find(d=>d.name==="Craft")).then(p=>f({appExistsLoading:!1,appExists:p!==void 0}))},[]),l}var ne=require("react");var Pe=require("os"),He=require("fs"),Qn=Un(require("path")),Kn="~/Library/Containers/com.lukilabs.lukiapp/Data/Library/Application Support/com.lukilabs.lukiapp",li=`${Kn}/Search`,ee=class{constructor(){this.primarySpace=()=>this.spaces.find(f=>f.primary);this.buildFilterRegexForExistingRealms=()=>{let f=Kn.replace("~",(0,Pe.homedir)()),p=(0,He.readdirSync)(f).filter(this.selectRealmFiles).map(this.extractSpaceIDs).filter(d=>d).join("|");return new RegExp(`(?:${p})[^.]*.sqlite$`)};this.selectRealmFiles=f=>f.match(/\.realm$/)!==null;this.extractSpaceIDs=f=>{let p=f.split("_");if(p.length===3)return p[1].split("||").pop()};this.makeSpaceFromStr=(f,p)=>({primary:!p.includes("||"),path:Qn.default.join(f,p),spaceID:p.match(/\w{8}-\w{4}-\w{4}-\w{4}-\w{12}/g)?.pop()||""});try{let f=li.replace("~",(0,Pe.homedir)()),p=this.buildFilterRegexForExistingRealms();this.spaces=(0,He.readdirSync)(f).filter(d=>d.match(p)).map(d=>this.makeSpaceFromStr(f,d))}catch(f){console.debug(`failed getting files: ${f}`),this.spaces=[]}console.debug("constructed config object")}};function Ue({appExistsLoading:l,appExists:f}){let[p,d]=(0,ne.useState)({configLoading:!0,config:null});return(0,ne.useEffect)(()=>{if(!l){if(!f)return d(w=>wt(bt({},w),{configIsLoading:!1}));d({configLoading:!1,config:new ee})}},[l]),p}var Vn=Un($n()),Jn=require("path"),Ge=require("fs"),Yn=require("@raycast/api"),se=require("react");function je({config:l,configLoading:f}){let[{databases:p,databasesLoading:d},w]=(0,se.useState)({databasesLoading:!0,databases:[]});return(0,se.useEffect)(()=>{f||!l||Promise.all(l.spaces.map(i=>fi(i.path).then(q=>({db:q,space:i})))).then(i=>w({databases:i.map(q=>({database:q.db,spaceID:q.space.spaceID})),databasesLoading:!1})).then(()=>console.debug("initialized databases "+l.spaces.map(i=>i.spaceID).join(", ")))},[f]),{databases:p,databasesLoading:d,spaces:l?.spaces}}var fi=async l=>{let f=(0,Ge.readFileSync)((0,Jn.join)(Yn.environment.assetsPath,"sql-wasm-fts5.wasm")),p=await(0,Vn.default)({wasmBinary:f});return new p.Database((0,Ge.readFileSync)(l))};var Y=require("@raycast/api");var ae=require("react");function Ce({databasesLoading:l,databases:f},p){let[d,w]=(0,ae.useState)({resultsLoading:!0,results:[]});return(0,ae.useEffect)(()=>{if(l)return;w(M=>wt(bt({},M),{resultsLoading:!0}));let i=Yt(p),[q,S]=i.length>0?[Jt,[i,gt]]:[jn,[gt]],W=f.map(({database:M,spaceID:B})=>({database:M,spaceID:B,blocks:Xt(M,B,q,S)})).map(({database:M,spaceID:B,blocks:R})=>Fn(M,B,R));w({resultsLoading:!1,results:W.flat()})},[l,p]),d}var J=require("@raycast/api");function Fe({resultsLoading:l,results:f,setQuery:p,query:d,config:w}){return _jsx(J.List,{isLoading:l,isShowingDetail:!0,onSearchTextChange:p},f.map(i=>_jsx(J.List.Item,{key:i.block.id,title:i.block.content,detail:_jsx(J.List.Item.Detail,{markdown:i.blocks.map(q=>q.type==="code"?"```\n"+q.content+"\n```":q.content).join(`

`)}),actions:_jsx(J.ActionPanel,null,_jsx(J.Action.OpenInBrowser,{url:`craftdocs://open?blockId=${i.block.id}&spaceId=${i.block.spaceID}`}))})),d.length>0&&_jsx(J.List.Section,{title:"Create new document"},_jsx(At,{query:d,spaceID:w?.primarySpace()?.spaceID||""})))}var ci=Y.Toast.Style,{useDetailedView:pi}=(0,Y.getPreferenceValues)();function Xn(){let l=Oe(),f=Ue(l),p=je(f),[d,w]=(0,ue.useState)(""),i={appExists:l,db:p,query:d,setQuery:w,config:f};return(0,ue.useEffect)(()=>{l.appExistsLoading||l.appExists||(0,Y.showToast)(ci.Failure,"Error","Craft app is not installed")},[l.appExistsLoading]),pi?hi(i):mi(i)}var mi=({appExists:l,db:f,query:p,setQuery:d,config:w})=>{let{resultsLoading:i,results:q}=Me(f,p),S=_jsx(Te,{isLoading:i,onSearchTextChange:d,blocks:q,query:p,config:w.config}),W=l.appExists?S:_jsx(Zn,null);return l.appExistsLoading?S:W},hi=({appExists:l,db:f,query:p,setQuery:d,config:w})=>{let{resultsLoading:i,results:q}=Ce(f,p),S=_jsx(Fe,{resultsLoading:i,setQuery:d,results:q,query:p,config:w.config}),W=l.appExists?S:_jsx(Zn,null);return l.appExistsLoading?S:W},Zn=()=>_jsx(Y.List,null,_jsx(Y.List.EmptyView,{title:"No results",icon:"command-icon-small.png"}));module.exports=ni(di);0&&(module.exports={});
